{"ast":null,"code":"export var BASE_URL=\"https://api.movies.kostyarad.nomoredomains.xyz\";// export const BASE_URL = \"http://localhost:3000\";\nfunction getResponseData(res){if(res.ok){return res.json();}return Promise.reject(\"\\u0413\\u0434\\u0435-\\u0442\\u043E \\u043E\\u0448\\u0438\\u0431\\u043E\\u0447\\u043A\\u0430:( : \".concat(res.status));}export function register(name,email,password){return fetch(\"\".concat(BASE_URL,\"/signup\"),{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,email:email,password:password})}).then(function(res){return getResponseData(res);});}export var login=function login(email,password){return fetch(\"\".concat(BASE_URL,\"/signin\"),{credentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(res){return getResponseData(res);}).then(function(data){if(data.jwt){localStorage.setItem(\"jwt\",data.jwt);return data.jwt;}});};export function getContent(jwt){return fetch(\"\".concat(BASE_URL,\"/users/me\"),{credentials:\"include\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(jwt)}}).then(function(res){return getResponseData(res);}).then(function(data){return data;});}export function editUserInfo(name,email){return fetch(\"\".concat(BASE_URL,\"/users/me\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\"))},credentials:this._credentials,body:JSON.stringify({name:name,email:email})}).then(function(response){if(response.ok){return response.json();}return Promise.reject(\"\\u0413\\u0434\\u0435-\\u0442\\u043E \\u043E\\u0448\\u0438\\u0431\\u043E\\u0447\\u043A\\u0430:( : \".concat(response.status));});}export function saveMovie(movie){return fetch(\"\".concat(BASE_URL,\"/movies\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\"))},body:JSON.stringify({country:movie.country,director:movie.director,duration:movie.duration,year:movie.year,description:movie.description,image:\"https://api.nomoreparties.co\".concat(movie.image.url),trailer:movie.trailerLink,nameRU:movie.nameRU,nameEN:movie.nameEN,thumbnail:\"https://api.nomoreparties.co\".concat(movie.image.formats.thumbnail.url),movieId:movie.id})}).then(function(response){if(response.ok){return response.json();}return Promise.reject(\"\\u0413\\u0434\\u0435-\\u0442\\u043E \\u043E\\u0448\\u0438\\u0431\\u043E\\u0447\\u043A\\u0430:( : \".concat(response.status));});}export function deleteMovie(movieId){return fetch(\"\".concat(BASE_URL,\"/movies/\").concat(movieId),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\"))}}).then(function(response){if(response.ok){return response.json();}return Promise.reject(\"\\u0413\\u0434\\u0435-\\u0442\\u043E \\u043E\\u0448\\u0438\\u0431\\u043E\\u0447\\u043A\\u0430:( : \".concat(response.status));});}export function getUserInfo(){return fetch(\"\".concat(BASE_URL,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\"))}}).then(function(response){if(response.ok){return response.json();}return Promise.reject(\"\\u0413\\u0434\\u0435-\\u0442\\u043E \\u043E\\u0448\\u0438\\u0431\\u043E\\u0447\\u043A\\u0430:( : \".concat(response.status));});}","map":{"version":3,"names":["BASE_URL","getResponseData","res","ok","json","Promise","reject","concat","status","register","name","email","password","fetch","credentials","method","headers","body","JSON","stringify","then","login","data","jwt","localStorage","setItem","getContent","Authorization","editUserInfo","getItem","_credentials","response","saveMovie","movie","country","director","duration","year","description","image","url","trailer","trailerLink","nameRU","nameEN","thumbnail","formats","movieId","id","deleteMovie","getUserInfo"],"sources":["/Users/konstantinradcenko/dev/movies-explorer-full/frontend/src/utils/MainApi.js"],"sourcesContent":["export const BASE_URL = \"https://api.movies.kostyarad.nomoredomains.xyz\";\n// export const BASE_URL = \"http://localhost:3000\";\n\nfunction getResponseData(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Где-то ошибочка:( : ${res.status}`);\n}\n\nexport function register(name, email, password) {\n  return fetch(`${BASE_URL}/signup`, {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ name, email, password }),\n  }).then((res) => getResponseData(res));\n}\n\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => getResponseData(res))\n    .then((data) => {\n      if (data.jwt) {\n        localStorage.setItem(\"jwt\", data.jwt);\n        return data.jwt;\n      }\n    });\n};\n\nexport function getContent(jwt) {\n  return fetch(`${BASE_URL}/users/me`, {\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${jwt}`,\n    },\n  })\n    .then((res) => getResponseData(res))\n    .then((data) => data);\n}\n\nexport function editUserInfo(name, email) {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    },\n    credentials: this._credentials,\n    body: JSON.stringify({\n      name: name,\n      email: email,\n    }),\n  }).then((response) => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Где-то ошибочка:( : ${response.status}`);\n  });\n}\n\nexport function saveMovie(movie) {\n  return fetch(`${BASE_URL}/movies`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    },\n    body: JSON.stringify({\n      country: movie.country,\n      director: movie.director,\n      duration: movie.duration,\n      year: movie.year,\n      description: movie.description,\n      image: `https://api.nomoreparties.co${movie.image.url}`,\n      trailer: movie.trailerLink,\n      nameRU: movie.nameRU,\n      nameEN: movie.nameEN,\n      thumbnail: `https://api.nomoreparties.co${movie.image.formats.thumbnail.url}`,\n      movieId: movie.id,\n    }),\n  }).then((response) => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Где-то ошибочка:( : ${response.status}`);\n  });\n}\n\nexport function deleteMovie(movieId) {\n  return fetch(`${BASE_URL}/movies/${movieId}`, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    },\n  }).then((response) => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Где-то ошибочка:( : ${response.status}`);\n  });\n}\n\nexport function getUserInfo() {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    },\n  }).then((response) => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Где-то ошибочка:( : ${response.status}`);\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}