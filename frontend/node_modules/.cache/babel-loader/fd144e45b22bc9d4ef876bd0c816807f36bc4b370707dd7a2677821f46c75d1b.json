{"ast":null,"code":"var _jsxFileName = \"/Users/konstantinradcenko/dev/movies-explorer-full/frontend/src/components/App/App.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Routes, Route, useNavigate, useLocation } from \"react-router-dom\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport moviesApi from \"../../utils/MoviesApi\";\nimport * as MainApi from \"../../utils/MainApi\";\nimport \"../../index.css\";\nimport Main from \"../Main/Main\";\nimport Header from \"../Header/Header\";\nimport Footer from \"../Footer/Footer\";\nimport Register from \"../Register/Register\";\nimport Login from \"../Login/Login\";\nimport Page404 from \"../Page404/Page404\";\nimport Profile from \"../Profile/Profile\";\nimport Movies from \"../Movies/Movies\";\nimport SavedMovies from \"../SavedMovies/SavedMovies\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport Popup from \"../Popup/Popup\";\nimport PopupSuccess from \"../../images/infotooltip-success.svg\";\nimport PopupFailure from \"../../images/infotooltip-failure.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  // STATES\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [loginErrorText, setLoginErrorText] = React.useState(\" \");\n  const [registerErrorText, setRegisterErrorText] = React.useState(\" \");\n  const [movies, setMovies] = React.useState([]);\n  const [savedMovies, setSavedMovies] = React.useState([]);\n  const [checkBoxMovies, setCheckBoxMovies] = React.useState(false);\n  const [checkBoxSavedMovies, setCheckBoxSavedMovies] = React.useState(false);\n  const [searchValue, setSearchValue] = React.useState(\"\");\n  const [searchValueSaved, setSearchValueSaved] = React.useState(\"\");\n  const [filteredMovies, setFilteredMovies] = React.useState([]);\n  const [filteredSavedMovies, setFilteredSavedMovies] = React.useState([]);\n  const [isPreloaderActive, setIsPreloaderActive] = React.useState(false);\n  const [noMovieError, setNoMovieError] = React.useState(false);\n  const [noMovieErrorText, setNoMovieErrorText] = React.useState(\"\");\n  const [popupText, setPopupText] = React.useState(\"\");\n  const [popupImage, setPopupImage] = React.useState(null);\n  const [isPopupOpen, setIsPopupOpen] = React.useState(false);\n  //FUNCTIONS\n  function handleClosePopup() {\n    setIsPopupOpen(false);\n  }\n  function handleCheckbox(evt) {\n    evt.preventDefault();\n    setCheckBox(!checkBox);\n    localStorage.setItem(\"checkBox\", !checkBox);\n  }\n  function handleRegistration(name, email, password) {\n    MainApi.register(name, email, password).then(res => {\n      if (res.name) {\n        handleLogin(email, password);\n      }\n    }).catch(err => {\n      if (err) {\n        console.log(err);\n        setRegisterErrorText(\"При регистрации пользователя произошла ошибка\");\n      }\n      if (err.includes(409)) {\n        setRegisterErrorText(\"Пользователь с таким email уже существует.\");\n      }\n    });\n  }\n  function handleLogin(email, password) {\n    MainApi.login(email, password).then(res => {\n      if (res) {\n        setLoggedIn(true);\n        navigate(\"/movies\", {\n          replace: true\n        });\n      }\n    }).catch(err => {\n      setLoggedIn(false);\n      if (err) {\n        console.log(err);\n        setLoginErrorText(\"При авторизации произошла ошибка.\");\n      }\n      if (err.includes(401)) {\n        setLoginErrorText(\"Вы ввели неправильный логин или пароль.\");\n      }\n    });\n  }\n  function handleUpdateUser(name, email) {\n    MainApi.editUserInfo(name, email).then(updatedUserInfo => {\n      setCurrentUser(updatedUserInfo);\n      setPopupImage(PopupSuccess);\n      setPopupText(\"Изменения данных успешны!\");\n      setIsPopupOpen(true);\n    }).catch(err => {\n      if (err) {\n        console.log(err);\n        setPopupImage(PopupFailure);\n        setPopupText(\"При обновлении пользователя произошла ошибка\");\n        setIsPopupOpen(true);\n      }\n      if (err.includes(409)) {\n        console.log(err);\n        setPopupImage(PopupFailure);\n        setPopupText(\"Пользователь с таким email уже существует.\");\n        setIsPopupOpen(true);\n      }\n    });\n  }\n  function handleExitClick() {\n    setLoggedIn(false);\n    localStorage.clear();\n    navigate(\"/\", {\n      replace: true\n    });\n  }\n  function checkToken() {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      MainApi.getContent(jwt).then(res => {\n        if (res) {\n          setLoggedIn(true);\n          navigate(location, {\n            replace: true\n          });\n          setCurrentUser(res.user);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n  function handleLikeMovie(movie) {\n    // проверить, сохранен ли фильм, если да - то удалить из сохраненных\n    if (isMovieSaved(movie)) {\n      savedMovies.map(item => {\n        if (item.movieId === movie.id) {\n          handleDeleteMovie(item);\n        }\n      });\n    } else {\n      MainApi.saveMovie(movie).then(data => {\n        const savedMovie = data.movie;\n        //чтобы при множественном клике на сохранить заново не добавлялся фильм в сохраненные\n        const newSavedMovies = savedMovies.filter(item => item.movieId !== savedMovie.movieId);\n        setSavedMovies([savedMovie, ...newSavedMovies]);\n        localStorage.setItem(\"savedMovies\", [JSON.stringify([savedMovie, ...newSavedMovies])]);\n      });\n    }\n  }\n  function getSavedMovies() {\n    MainApi.getSavedMovies().then(data => {\n      setSavedMovies(data.data);\n      localStorage.setItem(\"savedMovies\", JSON.stringify(data.data));\n    }).catch(err => console.log(err));\n  }\n  function isMovieSaved(movie) {\n    return savedMovies.some(item => item.movieId === movie.id);\n  }\n  function handleDeleteMovie(movie) {\n    MainApi.deleteMovie(movie._id).then(() => {\n      const newSavedMovies = savedMovies.filter(item => item.movieId !== movie.movieId);\n      localStorage.setItem(\"savedMovies\", JSON.stringify(newSavedMovies));\n      setSavedMovies(newSavedMovies);\n    });\n  }\n  // EFFECTS\n  React.useEffect(() => {\n    if (loggedIn) {\n      getSavedMovies();\n      // setSearchValue((localStorage.getItem(\"searchValue\")) || \"\");\n      // setSearchValueSaved((localStorage.getItem(\"searchValueSaved\")) || \"\");\n      setIsPreloaderActive(true);\n      moviesApi.getMovies().then(data => {\n        setMovies(data);\n      }).catch(err => {\n        setNoMovieError(true);\n        setNoMovieErrorText(`Во время запроса произошла ошибка.\n             Возможно, проблема с соединением или\n             сервер недоступен.\n             Подождите немного и попробуйте ещё раз`);\n        console.log(err);\n      }).finally(() => {\n        setIsPreloaderActive(false);\n      });\n      MainApi.getUserInfo().then(data => {\n        setCurrentUser(data.user);\n      }).catch(err => console.log(err));\n    }\n  }, [loggedIn]);\n  // эффект для поиска и фильтрации\n  // React.useEffect(() => {\n  //   let filteredMovies = movies;\n  //   let filteredSavedMovies = savedMovies;\n  //   if (!searchValue) {\n  //     filteredMovies = [];\n  //   }\n  //   if (!searchValueSaved) {\n  //     filteredSavedMovies = savedMovies;\n  //   }\n  //   if (searchValue) {\n  //     filteredMovies = filteredMovies.filter((movie) =>\n  //       movie.nameRU.toLowerCase().includes(searchValue.toLowerCase())\n  //     );\n  //     setNoMovieError(false);\n  //     setNoMovieErrorText(\"\");\n  //   }\n  //   if (searchValueSaved) {\n  //     filteredSavedMovies = filteredSavedMovies.filter((movie) =>\n  //       movie.nameRU.toLowerCase().includes(searchValueSaved.toLowerCase())\n  //     );\n  //   }\n  //   if (checkBox) {\n  //     filteredMovies = filteredMovies.filter((movie) => movie.duration <= 40);\n  //     filteredSavedMovies = filteredSavedMovies.filter(\n  //       (movie) => movie.duration <= 40\n  //     );\n  //   }\n  //   if (filteredMovies.length === 0 && searchValue) {\n  //     setNoMovieError(true);\n  //     setNoMovieErrorText(\"Ничего не найдено\");\n  //   }\n  //   setFilteredMovies(filteredMovies);\n  //   setFilteredSavedMovies(filteredSavedMovies);\n  // }, [\n  //   checkBox,\n  //   searchValue,\n  //   searchValueSaved,\n  //   movies,\n  //   savedMovies,\n  // ]);\n\n  React.useEffect(() => {\n    let filteredMovies = movies;\n    if (!searchValue) {\n      filteredMovies = [];\n    }\n    if (searchValue) {\n      filteredMovies = filteredMovies.filter(movie => movie.nameRU.toLowerCase().includes(searchValue.toLowerCase()));\n      localStorage.setItem(\"filteredMovies\", JSON.stringify(filteredMovies));\n      setNoMovieError(false);\n      setNoMovieErrorText(\"\");\n    }\n    if (filteredMovies.length === 0 && searchValue) {\n      setNoMovieError(true);\n      setNoMovieErrorText(\"Ничего не найдено\");\n    }\n    setFilteredMovies(filteredMovies);\n  }, [searchValue, movies]);\n  React.useEffect(() => {\n    let filteredSavedMovies = savedMovies;\n    if (!searchValueSaved) {\n      filteredSavedMovies = savedMovies;\n    }\n    if (searchValueSaved) {\n      filteredSavedMovies = filteredSavedMovies.filter(movie => movie.nameRU.toLowerCase().includes(searchValueSaved.toLowerCase()));\n      setNoMovieError(false);\n      setNoMovieErrorText(\"\");\n    }\n    setFilteredSavedMovies(filteredSavedMovies);\n  }, [searchValueSaved, savedMovies, location]);\n  React.useEffect(() => {\n    let filteredMovies = JSON.parse(localStorage.getItem(\"filteredMovies\"));\n    let filteredSavedMovies = savedMovies;\n    if (checkBox) {\n      filteredMovies = filteredMovies.filter(movie => movie.duration <= 40);\n      filteredSavedMovies = filteredSavedMovies.filter(movie => movie.duration <= 40);\n    }\n    setFilteredMovies(filteredMovies);\n    setFilteredSavedMovies(filteredSavedMovies);\n  }, [checkBox]);\n  React.useEffect(() => {\n    checkToken();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: [/*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              loggedIn: loggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Main, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/signin\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            loggedIn: !loggedIn,\n            children: /*#__PURE__*/_jsxDEV(\"main\", {\n              children: /*#__PURE__*/_jsxDEV(Login, {\n                handleLogin: handleLogin,\n                LoginErrorText: loginErrorText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/signup\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            loggedIn: !loggedIn,\n            children: /*#__PURE__*/_jsxDEV(\"main\", {\n              children: /*#__PURE__*/_jsxDEV(Register, {\n                handleRegistration: handleRegistration,\n                RegisterErrorText: registerErrorText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/movies\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            loggedIn: loggedIn,\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              loggedIn: loggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n              className: \"main\",\n              children: /*#__PURE__*/_jsxDEV(Movies, {\n                movies: filteredMovies,\n                page: \"movies\",\n                setSearchValue: setSearchValue,\n                checkBox: checkBox,\n                setCheckBox: setCheckBox,\n                handleCheckbox: handleCheckbox,\n                onLikeFilm: handleLikeMovie,\n                onDeleteFilm: handleDeleteMovie,\n                isMovieSaved: isMovieSaved,\n                isPreloaderActive: isPreloaderActive,\n                noMovieError: noMovieError,\n                noMovieErrorText: noMovieErrorText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/saved-movies\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            loggedIn: loggedIn,\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              loggedIn: loggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n              className: \"main\",\n              children: /*#__PURE__*/_jsxDEV(SavedMovies, {\n                savedMovies: filteredSavedMovies,\n                page: \"savedMovies\",\n                setSearchValue: setSearchValueSaved,\n                searchValue: searchValueSaved,\n                checkBox: checkBox,\n                setCheckBox: setCheckBox,\n                onDeleteFilm: handleDeleteMovie,\n                handleCheckbox: handleCheckbox\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/profile\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            loggedIn: loggedIn,\n            children: [/*#__PURE__*/_jsxDEV(Header, {\n              loggedIn: loggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n              className: \"main\",\n              children: /*#__PURE__*/_jsxDEV(Profile, {\n                onUpdateUser: handleUpdateUser,\n                handleExitClick: handleExitClick\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(\"main\", {\n            className: \"main\",\n            children: /*#__PURE__*/_jsxDEV(Page404, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Popup, {\n        text: popupText,\n        image: popupImage,\n        isOpen: isPopupOpen,\n        onClose: handleClosePopup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 311,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"J3adUE11aMvfdtUD0/lnhKZxf7A=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Routes","Route","useNavigate","useLocation","CurrentUserContext","moviesApi","MainApi","Main","Header","Footer","Register","Login","Page404","Profile","Movies","SavedMovies","ProtectedRoute","Popup","PopupSuccess","PopupFailure","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","navigate","location","currentUser","setCurrentUser","useState","loggedIn","setLoggedIn","loginErrorText","setLoginErrorText","registerErrorText","setRegisterErrorText","movies","setMovies","savedMovies","setSavedMovies","checkBoxMovies","setCheckBoxMovies","checkBoxSavedMovies","setCheckBoxSavedMovies","searchValue","setSearchValue","searchValueSaved","setSearchValueSaved","filteredMovies","setFilteredMovies","filteredSavedMovies","setFilteredSavedMovies","isPreloaderActive","setIsPreloaderActive","noMovieError","setNoMovieError","noMovieErrorText","setNoMovieErrorText","popupText","setPopupText","popupImage","setPopupImage","isPopupOpen","setIsPopupOpen","handleClosePopup","handleCheckbox","evt","preventDefault","setCheckBox","checkBox","localStorage","setItem","handleRegistration","name","email","password","register","then","res","handleLogin","catch","err","console","log","includes","login","replace","handleUpdateUser","editUserInfo","updatedUserInfo","handleExitClick","clear","checkToken","jwt","getItem","getContent","user","handleLikeMovie","movie","isMovieSaved","map","item","movieId","id","handleDeleteMovie","saveMovie","data","savedMovie","newSavedMovies","filter","JSON","stringify","getSavedMovies","some","deleteMovie","_id","useEffect","getMovies","finally","getUserInfo","nameRU","toLowerCase","length","parse","duration","Provider","value","children","className","path","element","fileName","_jsxFileName","lineNumber","columnNumber","LoginErrorText","RegisterErrorText","page","onLikeFilm","onDeleteFilm","onUpdateUser","text","image","isOpen","onClose","_c","$RefreshReg$"],"sources":["/Users/konstantinradcenko/dev/movies-explorer-full/frontend/src/components/App/App.js"],"sourcesContent":["import React from \"react\";\nimport { Routes, Route, useNavigate, useLocation } from \"react-router-dom\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport moviesApi from \"../../utils/MoviesApi\";\nimport * as MainApi from \"../../utils/MainApi\";\nimport \"../../index.css\";\nimport Main from \"../Main/Main\";\nimport Header from \"../Header/Header\";\nimport Footer from \"../Footer/Footer\";\nimport Register from \"../Register/Register\";\nimport Login from \"../Login/Login\";\nimport Page404 from \"../Page404/Page404\";\nimport Profile from \"../Profile/Profile\";\nimport Movies from \"../Movies/Movies\";\nimport SavedMovies from \"../SavedMovies/SavedMovies\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport Popup from \"../Popup/Popup\";\nimport PopupSuccess from \"../../images/infotooltip-success.svg\";\nimport PopupFailure from \"../../images/infotooltip-failure.svg\";\n\nfunction App() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  // STATES\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [loginErrorText, setLoginErrorText] = React.useState(\" \");\n  const [registerErrorText, setRegisterErrorText] = React.useState(\" \");\n  const [movies, setMovies] = React.useState([]);\n  const [savedMovies, setSavedMovies] = React.useState([]);\n  const [checkBoxMovies, setCheckBoxMovies] = React.useState(false);\n  const [checkBoxSavedMovies, setCheckBoxSavedMovies] = React.useState(false);\n  const [searchValue, setSearchValue] = React.useState(\"\");\n  const [searchValueSaved, setSearchValueSaved] = React.useState(\"\");\n  const [filteredMovies, setFilteredMovies] = React.useState([]);\n  const [filteredSavedMovies, setFilteredSavedMovies] = React.useState([]);\n  const [isPreloaderActive, setIsPreloaderActive] = React.useState(false);\n  const [noMovieError, setNoMovieError] = React.useState(false);\n  const [noMovieErrorText, setNoMovieErrorText] = React.useState(\"\");\n  const [popupText, setPopupText] = React.useState(\"\");\n  const [popupImage, setPopupImage] = React.useState(null);\n  const [isPopupOpen, setIsPopupOpen] = React.useState(false);\n  //FUNCTIONS\n  function handleClosePopup() {\n    setIsPopupOpen(false);\n  }\n\n  function handleCheckbox(evt) {\n    evt.preventDefault();\n    setCheckBox(!checkBox);\n    localStorage.setItem(\"checkBox\", !checkBox);\n  }\n\n  function handleRegistration(name, email, password) {\n    MainApi.register(name, email, password)\n      .then((res) => {\n        if (res.name) {\n          handleLogin(email, password);\n        }\n      })\n      .catch((err) => {\n        if (err) {\n          console.log(err);\n          setRegisterErrorText(\"При регистрации пользователя произошла ошибка\");\n        }\n        if (err.includes(409)) {\n          setRegisterErrorText(\"Пользователь с таким email уже существует.\");\n        }\n      });\n  }\n\n  function handleLogin(email, password) {\n    MainApi.login(email, password)\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          navigate(\"/movies\", { replace: true });\n        }\n      })\n      .catch((err) => {\n        setLoggedIn(false);\n        if (err) {\n          console.log(err);\n          setLoginErrorText(\"При авторизации произошла ошибка.\");\n        }\n        if (err.includes(401)) {\n          setLoginErrorText(\"Вы ввели неправильный логин или пароль.\");\n        }\n      });\n  }\n\n  function handleUpdateUser(name, email) {\n    MainApi.editUserInfo(name, email)\n      .then((updatedUserInfo) => {\n        setCurrentUser(updatedUserInfo);\n        setPopupImage(PopupSuccess);\n        setPopupText(\"Изменения данных успешны!\");\n        setIsPopupOpen(true);\n      })\n      .catch((err) => {\n        if (err) {\n          console.log(err);\n          setPopupImage(PopupFailure);\n          setPopupText(\"При обновлении пользователя произошла ошибка\");\n          setIsPopupOpen(true);\n        }\n        if (err.includes(409)) {\n          console.log(err);\n          setPopupImage(PopupFailure);\n          setPopupText(\"Пользователь с таким email уже существует.\");\n          setIsPopupOpen(true);\n        }\n      });\n  }\n\n  function handleExitClick() {\n    setLoggedIn(false);\n    localStorage.clear();\n    navigate(\"/\", { replace: true });\n  }\n\n  function checkToken() {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      MainApi.getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            navigate(location, { replace: true });\n            setCurrentUser(res.user);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }\n\n  function handleLikeMovie(movie) {\n    // проверить, сохранен ли фильм, если да - то удалить из сохраненных\n    if (isMovieSaved(movie)) {\n      savedMovies.map((item) => {\n        if (item.movieId === movie.id) {\n          handleDeleteMovie(item);\n        }\n      });\n    } else {\n      MainApi.saveMovie(movie).then((data) => {\n        const savedMovie = data.movie;\n        //чтобы при множественном клике на сохранить заново не добавлялся фильм в сохраненные\n        const newSavedMovies = savedMovies.filter(\n          (item) => item.movieId !== savedMovie.movieId\n        );\n        setSavedMovies([savedMovie, ...newSavedMovies]);\n        localStorage.setItem(\"savedMovies\", [\n          JSON.stringify([savedMovie, ...newSavedMovies]),\n        ]);\n      });\n    }\n  }\n\n  function getSavedMovies() {\n    MainApi.getSavedMovies()\n      .then((data) => {\n        setSavedMovies(data.data);\n        localStorage.setItem(\"savedMovies\", JSON.stringify(data.data));\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function isMovieSaved(movie) {\n    return savedMovies.some((item) => item.movieId === movie.id);\n  }\n\n  function handleDeleteMovie(movie) {\n    MainApi.deleteMovie(movie._id).then(() => {\n      const newSavedMovies = savedMovies.filter(\n        (item) => item.movieId !== movie.movieId\n      );\n      localStorage.setItem(\"savedMovies\", JSON.stringify(newSavedMovies));\n      setSavedMovies(newSavedMovies);\n    });\n  }\n  // EFFECTS\n  React.useEffect(() => {\n    if (loggedIn) {\n      getSavedMovies();\n      // setSearchValue((localStorage.getItem(\"searchValue\")) || \"\");\n      // setSearchValueSaved((localStorage.getItem(\"searchValueSaved\")) || \"\");\n      setIsPreloaderActive(true);\n      moviesApi\n        .getMovies()\n        .then((data) => {\n          setMovies(data);\n        })\n        .catch((err) => {\n          setNoMovieError(true);\n          setNoMovieErrorText(\n            `Во время запроса произошла ошибка.\n             Возможно, проблема с соединением или\n             сервер недоступен.\n             Подождите немного и попробуйте ещё раз`\n          );\n          console.log(err);\n        })\n        .finally(() => {\n          setIsPreloaderActive(false);\n        });\n      MainApi.getUserInfo()\n        .then((data) => {\n          setCurrentUser(data.user);\n        })\n        .catch((err) => console.log(err));\n    }\n  }, [loggedIn]);\n  // эффект для поиска и фильтрации\n  // React.useEffect(() => {\n  //   let filteredMovies = movies;\n  //   let filteredSavedMovies = savedMovies;\n  //   if (!searchValue) {\n  //     filteredMovies = [];\n  //   }\n  //   if (!searchValueSaved) {\n  //     filteredSavedMovies = savedMovies;\n  //   }\n  //   if (searchValue) {\n  //     filteredMovies = filteredMovies.filter((movie) =>\n  //       movie.nameRU.toLowerCase().includes(searchValue.toLowerCase())\n  //     );\n  //     setNoMovieError(false);\n  //     setNoMovieErrorText(\"\");\n  //   }\n  //   if (searchValueSaved) {\n  //     filteredSavedMovies = filteredSavedMovies.filter((movie) =>\n  //       movie.nameRU.toLowerCase().includes(searchValueSaved.toLowerCase())\n  //     );\n  //   }\n  //   if (checkBox) {\n  //     filteredMovies = filteredMovies.filter((movie) => movie.duration <= 40);\n  //     filteredSavedMovies = filteredSavedMovies.filter(\n  //       (movie) => movie.duration <= 40\n  //     );\n  //   }\n  //   if (filteredMovies.length === 0 && searchValue) {\n  //     setNoMovieError(true);\n  //     setNoMovieErrorText(\"Ничего не найдено\");\n  //   }\n  //   setFilteredMovies(filteredMovies);\n  //   setFilteredSavedMovies(filteredSavedMovies);\n  // }, [\n  //   checkBox,\n  //   searchValue,\n  //   searchValueSaved,\n  //   movies,\n  //   savedMovies,\n  // ]);\n\n  React.useEffect(() => {\n    let filteredMovies = movies;\n    if (!searchValue) {\n      filteredMovies = [];\n    }\n    if (searchValue) {\n      filteredMovies = filteredMovies.filter((movie) =>\n        movie.nameRU.toLowerCase().includes(searchValue.toLowerCase())\n      );\n      localStorage.setItem(\"filteredMovies\", JSON.stringify(filteredMovies));\n      setNoMovieError(false);\n      setNoMovieErrorText(\"\");\n    }\n    if (filteredMovies.length === 0 && searchValue) {\n      setNoMovieError(true);\n      setNoMovieErrorText(\"Ничего не найдено\");\n    }\n    setFilteredMovies(filteredMovies);\n  }, [searchValue, movies]);\n\n  React.useEffect(() => {\n    let filteredSavedMovies = savedMovies;\n    if (!searchValueSaved) {\n      filteredSavedMovies = savedMovies;\n    }\n    if (searchValueSaved) {\n      filteredSavedMovies = filteredSavedMovies.filter((movie) =>\n        movie.nameRU.toLowerCase().includes(searchValueSaved.toLowerCase())\n      );\n      setNoMovieError(false);\n      setNoMovieErrorText(\"\");\n    }\n    setFilteredSavedMovies(filteredSavedMovies);\n  }, [searchValueSaved, savedMovies, location]);\n\n  React.useEffect(() => {\n    let filteredMovies = JSON.parse(localStorage.getItem(\"filteredMovies\"));\n    let filteredSavedMovies = savedMovies;\n    if (checkBox) {\n      filteredMovies = filteredMovies.filter((movie) => movie.duration <= 40);\n      filteredSavedMovies = filteredSavedMovies.filter(\n        (movie) => movie.duration <= 40\n      );\n    }\n    setFilteredMovies(filteredMovies);\n    setFilteredSavedMovies(filteredSavedMovies);\n  }, [checkBox]);\n\n  React.useEffect(() => {\n    checkToken();\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"app\">\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              <>\n                <Header loggedIn={loggedIn} />\n                <Main />\n                <Footer />\n              </>\n            }\n          />\n\n          <Route\n            path=\"/signin\"\n            element={\n              <ProtectedRoute loggedIn={!loggedIn}>\n                <main>\n                  <Login\n                    handleLogin={handleLogin}\n                    LoginErrorText={loginErrorText}\n                  />\n                </main>\n              </ProtectedRoute>\n            }\n          />\n\n          <Route\n            path=\"/signup\"\n            element={\n              <ProtectedRoute loggedIn={!loggedIn}>\n                <main>\n                  <Register\n                    handleRegistration={handleRegistration}\n                    RegisterErrorText={registerErrorText}\n                  />\n                </main>\n              </ProtectedRoute>\n            }\n          />\n\n          <Route\n            path=\"/movies\"\n            element={\n              <ProtectedRoute loggedIn={loggedIn}>\n                <Header loggedIn={loggedIn} />\n                <main className=\"main\">\n                  <Movies\n                    movies={filteredMovies}\n                    page=\"movies\"\n                    setSearchValue={setSearchValue}\n                    checkBox={checkBox}\n                    setCheckBox={setCheckBox}\n                    handleCheckbox={handleCheckbox}\n                    onLikeFilm={handleLikeMovie}\n                    onDeleteFilm={handleDeleteMovie}\n                    isMovieSaved={isMovieSaved}\n                    isPreloaderActive={isPreloaderActive}\n                    noMovieError={noMovieError}\n                    noMovieErrorText={noMovieErrorText}\n                  />\n                </main>\n                <Footer />\n              </ProtectedRoute>\n            }\n          />\n\n          <Route\n            path=\"/saved-movies\"\n            element={\n              <ProtectedRoute loggedIn={loggedIn}>\n                <Header loggedIn={loggedIn} />\n                <main className=\"main\">\n                  <SavedMovies\n                    savedMovies={filteredSavedMovies}\n                    page=\"savedMovies\"\n                    setSearchValue={setSearchValueSaved}\n                    searchValue={searchValueSaved}\n                    checkBox={checkBox}\n                    setCheckBox={setCheckBox}\n                    onDeleteFilm={handleDeleteMovie}\n                    handleCheckbox={handleCheckbox}\n                  />\n                </main>\n                <Footer />\n              </ProtectedRoute>\n            }\n          />\n\n          <Route\n            path=\"/profile\"\n            element={\n              <ProtectedRoute loggedIn={loggedIn}>\n                <Header loggedIn={loggedIn} />\n                <main className=\"main\">\n                  <Profile\n                    onUpdateUser={handleUpdateUser}\n                    handleExitClick={handleExitClick}\n                  />\n                </main>\n              </ProtectedRoute>\n            }\n          />\n\n          <Route\n            path=\"*\"\n            element={\n              <main className=\"main\">\n                <Page404 />\n              </main>\n            }\n          />\n        </Routes>\n        <Popup\n          text={popupText}\n          image={popupImage}\n          isOpen={isPopupOpen}\n          onClose={handleClosePopup}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}