{"ast":null,"code":"import _slicedToArray from\"/Users/konstantinradcenko/dev/movies-explorer-full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */import React from\"react\";import useValidateForm from\"../../hooks/useValidateForm\";import{CurrentUserContext}from\"../../contexts/CurrentUserContext\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Profile(_ref){var onUpdateUser=_ref.onUpdateUser,handleExitClick=_ref.handleExitClick,ProfileErrorText=_ref.ProfileErrorText;var _useValidateForm=useValidateForm(),handleInputChange=_useValidateForm.handleInputChange,setInputValues=_useValidateForm.setInputValues,inputValues=_useValidateForm.inputValues,inputErrors=_useValidateForm.inputErrors,isFormValid=_useValidateForm.isFormValid;var currentUser=React.useContext(CurrentUserContext);var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),areInputsdisabled=_React$useState2[0],setAreInputsdisabled=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditing=_React$useState4[0],setIsEditing=_React$useState4[1];React.useEffect(function(){setInputValues({name:currentUser.name,email:currentUser.email});},[]);function handleSubmit(evt){evt.preventDefault();var name=inputValues.name,email=inputValues.email;onUpdateUser(name,email);setIsEditing(!isEditing);setAreInputsdisabled(!areInputsdisabled);return inputValues;}function handleEditClick(){setAreInputsdisabled(!areInputsdisabled);setIsEditing(!isEditing);}return/*#__PURE__*/_jsx(\"section\",{className:\"profile\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"profile-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"profile-form__heading\",children:[\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \",currentUser.name,\"!\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-form__container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile-form__text\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{className:\"profile-form__input \".concat(inputErrors.name?\"profile-form__input_invalid\":\"\"),type:\"name\",name:\"name\",id:\"name\",placeholder:\"\\u0418\\u043C\\u044F\",minLength:\"2\",disabled:areInputsdisabled,maxLength:\"20\",value:(inputValues===null||inputValues===void 0?void 0:inputValues.name)||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{className:\"profile-form__input-error profile-form__input-error_name\",children:inputErrors.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-form__container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile-form__text\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{className:\"profile-form__input \".concat(inputErrors.email?\"profile-form__input_invalid\":\"\"),type:\"email\",name:\"email\",placeholder:\"E-mail\",id:\"email\",minLength:\"5\",disabled:areInputsdisabled,maxLength:\"50\",value:(inputValues===null||inputValues===void 0?void 0:inputValues.email)||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{className:\"profile-form__input-error profile-form__input-error_email\",children:inputErrors.email})]}),isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-form__error\",children:ProfileErrorText}),/*#__PURE__*/_jsx(\"button\",{disabled:inputValues.name===currentUser.name&&inputValues.email===currentUser.email,type:\"submit\",\"aria-label\":\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\",className:\"button profile-form__save-button \".concat(inputValues.name===currentUser.name&&inputValues.email===currentUser.email||!isFormValid?\"profile-form__save-button_inactive\":\"\"),children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"link profile-form__link\",onClick:handleEditClick,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"p\",{className:\"link profile-form__link\",onClick:handleExitClick,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"})]})]})});}export default Profile;","map":{"version":3,"names":["React","useValidateForm","CurrentUserContext","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Profile","_ref","onUpdateUser","handleExitClick","ProfileErrorText","_useValidateForm","handleInputChange","setInputValues","inputValues","inputErrors","isFormValid","currentUser","useContext","_React$useState","useState","_React$useState2","_slicedToArray","areInputsdisabled","setAreInputsdisabled","_React$useState3","_React$useState4","isEditing","setIsEditing","useEffect","name","email","handleSubmit","evt","preventDefault","handleEditClick","className","children","onSubmit","concat","type","id","placeholder","minLength","disabled","maxLength","value","onChange","onClick"],"sources":["/Users/konstantinradcenko/dev/movies-explorer-full/frontend/src/components/Profile/Profile.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React from \"react\";\nimport useValidateForm from \"../../hooks/useValidateForm\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\n\nfunction Profile({ onUpdateUser, handleExitClick, ProfileErrorText }) {\n  const {\n    handleInputChange,\n    setInputValues,\n    inputValues,\n    inputErrors,\n    isFormValid,\n  } = useValidateForm();\n  const currentUser = React.useContext(CurrentUserContext);\n  const [areInputsdisabled, setAreInputsdisabled] = React.useState(true);\n  const [isEditing, setIsEditing] = React.useState(false);\n\n  React.useEffect(() => {\n    setInputValues({ name: currentUser.name, email: currentUser.email });\n  }, []);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    const { name, email } = inputValues;\n    onUpdateUser(name, email);\n    setIsEditing(!isEditing);\n    setAreInputsdisabled(!areInputsdisabled);\n    return inputValues;\n  }\n\n  function handleEditClick() {\n    setAreInputsdisabled(!areInputsdisabled);\n    setIsEditing(!isEditing);\n  }\n  \n  return (\n    <section className=\"profile\">\n      <form className=\"profile-form\" onSubmit={handleSubmit}>\n        <h1 className=\"profile-form__heading\">Привет, {currentUser.name}!</h1>\n        <div className=\"profile-form__container\">\n          <p className=\"profile-form__text\">Имя</p>\n          <input\n            className={`profile-form__input ${\n              inputErrors.name ? \"profile-form__input_invalid\" : \"\"\n            }`}\n            type=\"name\"\n            name=\"name\"\n            id=\"name\"\n            placeholder=\"Имя\"\n            minLength=\"2\"\n            disabled={areInputsdisabled}\n            maxLength=\"20\"\n            value={inputValues?.name || \"\"}\n            onChange={handleInputChange}\n          />\n          <label className=\"profile-form__input-error profile-form__input-error_name\">\n            {inputErrors.name}\n          </label>\n        </div>\n        <div className=\"profile-form__container\">\n          <p className=\"profile-form__text\">E-mail</p>\n          <input\n            className={`profile-form__input ${\n              inputErrors.email ? \"profile-form__input_invalid\" : \"\"\n            }`}\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"E-mail\"\n            id=\"email\"\n            minLength=\"5\"\n            disabled={areInputsdisabled}\n            maxLength=\"50\"\n            value={inputValues?.email || \"\"}\n            onChange={handleInputChange}\n          />\n          <label className=\"profile-form__input-error profile-form__input-error_email\">\n            {inputErrors.email}\n          </label>\n        </div>\n        {isEditing ? (\n          <>\n            <span className=\"profile-form__error\">{ProfileErrorText}</span>\n            <button\n              disabled={\n                inputValues.name === currentUser.name &&\n                inputValues.email === currentUser.email\n              }\n              type=\"submit\"\n              aria-label=\"Сохранение данных профиля\"\n              className={`button profile-form__save-button ${\n                (inputValues.name === currentUser.name &&\n                  inputValues.email === currentUser.email) ||\n                !isFormValid\n                  ? \"profile-form__save-button_inactive\"\n                  : \"\"\n              }`}\n            >\n              Сохранить\n            </button>\n          </>\n        ) : (\n          <>\n            <p className=\"link profile-form__link\" onClick={handleEditClick}>\n              Редактировать\n            </p>\n            <p className=\"link profile-form__link\" onClick={handleExitClick}>\n              Выйти из аккаунта\n            </p>\n          </>\n        )}\n      </form>\n    </section>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}